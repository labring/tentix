# Tentix = Ten (10x æ•ˆç‡) Tix (å·¥å•ç³»ç»Ÿ)

[English](README.md) | [ä¸­æ–‡](README.zh-CN.md)

ä¸€ä¸ªåŸºäº FastGPT çš„ AI å®¢æœå¹³å°ï¼Œæä¾› 10 å€åŠ é€Ÿçš„è§£å†³æ–¹æ¡ˆã€‚

* ğŸš€ 10 å€æ›´å¿«çš„å“åº”é€Ÿåº¦
* ğŸ¤– 10 å€å‡å°‘äººå·¥å¹²é¢„
* ğŸ˜Š 10 å€æå‡ç”¨æˆ·æ»¡æ„åº¦

![image](https://github.com/user-attachments/assets/798dbbd3-4b78-4412-bf69-fda27f12d128)

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
- [æ•°æ®åº“è„šæœ¬](#æ•°æ®åº“è„šæœ¬)
- [é…ç½®æ–‡ä»¶](#é…ç½®æ–‡ä»¶)
- [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)
- [API æ–‡æ¡£](#api-æ–‡æ¡£)
- [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

Tentix æ˜¯ä¸€ä¸ªåŸºäº Monorepo æ¶æ„æ„å»ºçš„ç°ä»£åŒ– AI é©±åŠ¨å®¢æœç³»ç»Ÿï¼Œé›†æˆäº†å‰ç«¯ç•Œé¢ã€åç«¯ API å’Œ AI å¤„ç†èƒ½åŠ›ã€‚ç³»ç»Ÿæ”¯æŒå¤šæ¸ é“é›†æˆï¼ˆé£ä¹¦ç­‰ï¼‰ï¼Œæä¾›æ™ºèƒ½å·¥å•å¤„ç†ã€è‡ªåŠ¨å›å¤å’Œæ— ç¼çš„äººæœºäº¤æ¥åŠŸèƒ½ã€‚

### æ ¸å¿ƒåŠŸèƒ½

- ğŸ¤– **AI æ™ºèƒ½å®¢æœ**ï¼šåŸºäº FastGPT çš„æ™ºèƒ½å¯¹è¯ç³»ç»Ÿ
- ğŸ“± **å¤šæ¸ é“é›†æˆ**ï¼šæ”¯æŒé£ä¹¦ã€å¾®ä¿¡ç­‰å¹³å°
- ğŸ« **å·¥å•ç®¡ç†**ï¼šå®Œæ•´çš„å·¥å•ç”Ÿå‘½å‘¨æœŸç®¡ç†
- ğŸ‘¥ **å›¢é˜Ÿåä½œ**ï¼šæ”¯æŒå¤šéƒ¨é—¨ã€å¤šè§’è‰²åä½œ
- ğŸ“Š **æ•°æ®åˆ†æ**ï¼šå®æ—¶ç›‘æ§å’Œæ•°æ®ç»Ÿè®¡
- ğŸ”§ **å¯æ‰©å±•æ¶æ„**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•

## ğŸ›  æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**ï¼šReact 19 + TypeScript
- **æ„å»ºå·¥å…·**ï¼šVite 6.1
- **è·¯ç”±**ï¼šTanStack Router
- **çŠ¶æ€ç®¡ç†**ï¼šZustand + TanStack Query
- **UI ç»„ä»¶**ï¼šè‡ªå®šä¹‰ UI ç»„ä»¶åº“ + Tailwind CSS 4.0
- **å¯Œæ–‡æœ¬ç¼–è¾‘å™¨**ï¼šTipTap
- **ä»£ç é«˜äº®**ï¼šReact Syntax Highlighter

### åç«¯æŠ€æœ¯æ ˆ
- **è¿è¡Œæ—¶**ï¼šBun
- **æ¡†æ¶**ï¼šHono 4.7
- **æ•°æ®åº“**ï¼šPostgreSQL + Drizzle ORM
- **API æ–‡æ¡£**ï¼šOpenAPI + Scalar
- **æ–‡ä»¶å­˜å‚¨**ï¼šMinIO
- **ç¼“å­˜**ï¼šNode Cache
- **é™æµ**ï¼šHono Rate Limiter

### å¼€å‘å·¥å…·
- **Monorepo**ï¼šTurborepo
- **åŒ…ç®¡ç†å™¨**ï¼šBun
- **ä»£ç è§„èŒƒ**ï¼šESLint + Prettier
- **ç±»å‹æ£€æŸ¥**ï¼šTypeScript 5.8
- **å®¹å™¨åŒ–**ï¼šDocker + Docker Compose

## ğŸ“ é¡¹ç›®ç»“æ„

```
tentix-v2/
â”œâ”€â”€ frontend/                 # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/      # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ routes/          # è·¯ç”±é¡µé¢
â”‚   â”‚   â”œâ”€â”€ store/           # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ hooks/           # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ lib/             # å·¥å…·åº“
â”‚   â”‚   â””â”€â”€ modal/           # æ¨¡æ€æ¡†ç»„ä»¶
â”‚   â”œâ”€â”€ public/              # é™æ€èµ„æº
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ server/                   # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ api/                 # API è·¯ç”±
â”‚   â”œâ”€â”€ db/                  # æ•°æ®åº“é…ç½®
â”‚   â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ types/               # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ script/              # è„šæœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ config.*.json        # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ packages/                 # å…±äº«åŒ…
â”‚   â”œâ”€â”€ ui/                  # UI ç»„ä»¶åº“
â”‚   â”œâ”€â”€ i18n/                # å›½é™…åŒ–
â”‚   â”œâ”€â”€ eslint-config/       # ESLint é…ç½®
â”‚   â””â”€â”€ typescript-config/   # TypeScript é…ç½®
â”œâ”€â”€ docker-compose.yml        # Docker Compose é…ç½®
â”œâ”€â”€ Dockerfile               # Docker é•œåƒé…ç½®
â”œâ”€â”€ Makefile                 # æ„å»ºè„šæœ¬
â”œâ”€â”€ turbo.json               # Turborepo é…ç½®
â””â”€â”€ package.json             # æ ¹åŒ…é…ç½®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 20
- Bun >= 1.2.16
- PostgreSQL
- Dockerï¼ˆå¯é€‰ï¼‰

### å®‰è£…ä¾èµ–

```bash
bun install
```

æ­¤ Monorepo åªèƒ½ä½¿ç”¨ Bun ä½œä¸ºåŒ…ç®¡ç†å™¨ã€‚

### ç¯å¢ƒé…ç½®

1. ç”ŸæˆåŠ å¯†å¯†é’¥ï¼š
```bash
cd server
bun run script/getCryptoKey.ts
```

2. å¤åˆ¶é…ç½®æ–‡ä»¶æ¨¡æ¿ï¼š
```bash
cp server/config.template.json server/config.dev.json
```

3. é…ç½®ç¯å¢ƒå˜é‡ï¼š
```bash
cp .env.template .env.local
# å°†ç”Ÿæˆçš„åŠ å¯†å¯†é’¥æ·»åŠ åˆ° .env.local
```

4. åˆå§‹åŒ–æ•°æ®åº“ï¼š
```bash
cd server
bun run script/initDB.ts
```

5. ï¼ˆå¯é€‰ï¼‰ç”Ÿæˆå¼€å‘ç”¨çš„ç§å­æ•°æ®ï¼š
```bash
cd server
bun run seed
```

è¯¦ç»†é…ç½®è¯´æ˜è¯·å‚è€ƒ [é…ç½®æ–‡ä»¶](#é…ç½®æ–‡ä»¶) å’Œ [æ•°æ®åº“è„šæœ¬](#æ•°æ®åº“è„šæœ¬) éƒ¨åˆ†ã€‚

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# å¯åŠ¨å¼€å‘ç¯å¢ƒ
bun run dev

# æˆ–ä½¿ç”¨ Make å‘½ä»¤
make dev
```

è®¿é—® http://localhost:5173 æŸ¥çœ‹å‰ç«¯åº”ç”¨
è®¿é—® http://localhost:3000/api/reference æŸ¥çœ‹åç«¯ API

## ğŸ’» å¼€å‘æŒ‡å—

### å¼€å‘å‘½ä»¤

```bash
# å¼€å‘ç¯å¢ƒ
bun run dev              # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
bun run build            # æ„å»ºé¡¹ç›®
bun run lint             # ä»£ç æ£€æŸ¥
bun run format           # ä»£ç æ ¼å¼åŒ–
bun run typecheck        # ç±»å‹æ£€æŸ¥
bun run test             # è¿è¡Œæµ‹è¯•

# æ•°æ®åº“æ“ä½œ
cd server
bun run generate         # ç”Ÿæˆæ•°æ®åº“è¿ç§»
bun run migrate          # æ‰§è¡Œæ•°æ®åº“è¿ç§»
bun run studio           # æ‰“å¼€ Drizzle Studio
bun run seed             # æ•°æ®åº“ç§å­æ•°æ®

# æ•°æ®åº“å·¥å…·è„šæœ¬
bun run script/getCryptoKey.ts      # ç”ŸæˆåŠ å¯†å¯†é’¥
bun run script/initDB.ts            # åˆå§‹åŒ–æ•°æ®åº“å’Œç”¨æˆ·
bun run script/resetDB.ts           # å®Œå…¨é‡ç½®æ•°æ®åº“
bun run script/migrateStaffList.ts  # ä»é£ä¹¦è¿ç§»å‘˜å·¥

# æœ‰ç”¨çš„ Bash å‘½ä»¤
rm -rf ./**/turbo ./**/node_modules ./**/output ./**/dist
```

### ä»£ç è§„èŒƒ

é¡¹ç›®ä½¿ç”¨ ESLint + Prettier è¿›è¡Œä»£ç è§„èŒƒç®¡ç†ï¼š

- ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼
- éµå¾ª React Hooks çº¦å®š
- ç»„ä»¶ä½¿ç”¨ PascalCase å‘½å
- æ–‡ä»¶ä½¿ç”¨ kebab-case å‘½å
- æäº¤å‰è‡ªåŠ¨è¿è¡Œ lint æ£€æŸ¥

### å¼€å‘å·¥ä½œæµ

1. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯**ï¼š`git checkout -b feature/your-feature`
2. **å¼€å‘åŠŸèƒ½**ï¼šéµå¾ªä»£ç è§„èŒƒè¿›è¡Œå¼€å‘
3. **è¿è¡Œæµ‹è¯•**ï¼š`bun run test` ç¡®ä¿æµ‹è¯•é€šè¿‡
4. **ä»£ç æ£€æŸ¥**ï¼š`bun run lint` ä¿®å¤ä»£ç é—®é¢˜
5. **æäº¤ä»£ç **ï¼šä½¿ç”¨æ ‡å‡†åŒ–æäº¤ä¿¡æ¯
6. **åˆ›å»º PR**ï¼šæäº¤ Pull Request è¿›è¡Œä»£ç å®¡æŸ¥

## ğŸ—„ï¸ æ•°æ®åº“è„šæœ¬

é¡¹ç›®åŒ…å«å¤šä¸ªç”¨äºæ•°æ®åº“ç®¡ç†å’Œç³»ç»Ÿåˆå§‹åŒ–çš„å·¥å…·è„šæœ¬ã€‚è¿™äº›è„šæœ¬ä½äº `server/script/` ç›®å½•ä¸­ï¼Œå¤„ç†æ•°æ®åº“è®¾ç½®ã€ç”¨æˆ·ç®¡ç†å’Œæ•°æ®è¿ç§»çš„å„ä¸ªæ–¹é¢ã€‚

### å¯ç”¨è„šæœ¬

- **`getCryptoKey.ts`**ï¼šä¸ºåº”ç”¨ç¨‹åºç”Ÿæˆå®‰å…¨çš„ AES-256 åŠ å¯†å¯†é’¥
- **`initDB.ts`**ï¼šä½¿ç”¨ç³»ç»Ÿç”¨æˆ·ã€AI ç”¨æˆ·å’Œå‘˜å·¥åˆå§‹åŒ–æ•°æ®åº“
- **`resetDB.ts`**ï¼šå®Œå…¨é‡ç½®æ•°æ®åº“æ¨¡å¼å¹¶é‡æ–°ç”Ÿæˆè¿ç§»
- **`migrateStaffList.ts`**ï¼šä»é£ä¹¦å¹³å°è·å–å¹¶è¿ç§»å‘˜å·¥æ•°æ®
- **`seed.ts`**ï¼šä¸ºå¼€å‘å’Œæµ‹è¯•ç”ŸæˆçœŸå®çš„ç§å­æ•°æ®

### å¿«é€Ÿè®¾ç½®å·¥ä½œæµ

```bash
# 1. ç”ŸæˆåŠ å¯†å¯†é’¥
cd server && bun run script/getCryptoKey.ts

# 2. åˆå§‹åŒ–æ•°æ®åº“
bun run script/initDB.ts

# 3. ï¼ˆå¯é€‰ï¼‰ç”Ÿæˆæµ‹è¯•æ•°æ®
bun run seed
```

æœ‰å…³æ¯ä¸ªè„šæœ¬çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä½¿ç”¨ç¤ºä¾‹ã€é…ç½®è¦æ±‚å’Œæ•…éšœæ’é™¤ï¼Œè¯·å‚é˜… [**è„šæœ¬æ–‡æ¡£**](SCRIPTS.md)ã€‚

## âš™ï¸ é…ç½®æ–‡ä»¶

### æœåŠ¡å™¨é…ç½®ï¼ˆ`server/config.*.json`ï¼‰

```json
{
  "$schema": "./config.schema.json",
  "feishu_app_id": "your_feishu_app_id",
  "feishu_app_secret": "your_feishu_app_secret",
  "aiProfile": {
    "uid": "0",
    "name": "Tentix AI",
    "nickname": "Tentix AI",
    "role": "ai",
    "avatar": "avatar_url"
  },
  "department_ids": ["department_id"],
  "agents_ids": ["agent_id"],
  "admin_ids": ["admin_id"],
  "staffs": [],
  "departments": []
}
```

### ç¯å¢ƒå˜é‡ï¼ˆ`.env.local`ï¼‰

```bash
# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://username:password@localhost:5432/tentix
ENCRYPTION_KEY="q1cRtBG7J9YyFlPmeynwlJ1B+5Nu0SOa+hAUtUhh9lk="

# MinIO é…ç½®
MINIO_ACCESS_KEY=your_access_key
MINIO_SECRET_KEY=your_secret_key
MINIO_BUCKET=your_bucket_name
MINIO_ENDPOINT=your_minio_endpoint

# FastGPT é…ç½®
FASTGPT_API_URL=your_fastgpt_api_url
FASTGPT_API_KEY=your_fastgpt_api_key
FASTGPT_API_LIMIT=50

# å…¶ä»–é…ç½®
NODE_ENV=development
```

### é…ç½®æ–‡ä»¶è¯´æ˜

- `config.dev.json`ï¼šå¼€å‘ç¯å¢ƒé…ç½®
- `config.prod.json`ï¼šç”Ÿäº§ç¯å¢ƒé…ç½®
- `config.template.json`ï¼šé…ç½®æ–‡ä»¶æ¨¡æ¿
- `config.schema.json`ï¼šé…ç½®æ–‡ä»¶ JSON Schema

## ğŸš¢ éƒ¨ç½²æŒ‡å—

### Docker éƒ¨ç½²ï¼ˆæ¨èï¼‰

#### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

```bash
# ä½¿ç”¨ Docker Compose éƒ¨ç½²
make docker-up

# æˆ–ç›´æ¥ä½¿ç”¨ docker-compose
docker-compose up -d --build
```

#### å¼€å‘ç¯å¢ƒæ„å»ºæµ‹è¯•

```bash
# å¯åŠ¨å¼€å‘ç¯å¢ƒ
make docker-dev

# æˆ–ä½¿ç”¨ docker-compose
docker-compose --profile dev up --build
```

### æ‰‹åŠ¨éƒ¨ç½²

```bash
# 1. æ„å»ºé¡¹ç›®
bun run build

# 2. å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
bun run start

# æˆ–ä½¿ç”¨ PM2
pm2 start bun --name tentix -- run start
```

### éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨

```bash
# 1. æ„å»º Docker é•œåƒ
make build

# 2. æ¨é€åˆ°é•œåƒä»“åº“
make push DOCKER_REGISTRY=your-registry

# 3. åœ¨æœåŠ¡å™¨ä¸Šæ‹‰å–å¹¶è¿è¡Œ
docker pull your-registry/tentix:latest
docker run -d -p 3000:3000 your-registry/tentix:latest
```

### å¥åº·æ£€æŸ¥

éƒ¨ç½²åï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹ç«¯ç‚¹æ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼š

- å¥åº·æ£€æŸ¥ï¼š`GET /health`
- API æ–‡æ¡£ï¼š`GET /api/reference`
- æœåŠ¡çŠ¶æ€ï¼š`GET /api/status`

## ğŸ“š API æ–‡æ¡£

### è®¿é—® API æ–‡æ¡£

å¯åŠ¨æœåŠ¡åï¼Œè®¿é—®ä»¥ä¸‹åœ°å€æŸ¥çœ‹ API æ–‡æ¡£ï¼š

- **Scalar UI**ï¼šhttp://localhost:3000/api/reference
- **OpenAPI JSON**ï¼šhttp://localhost:3000/openapi.json

### ä¸»è¦ API ç«¯ç‚¹

```
GET    /api/health          # å¥åº·æ£€æŸ¥
POST   /api/auth/login      # ç”¨æˆ·ç™»å½•
GET    /api/tickets         # è·å–å·¥å•åˆ—è¡¨
POST   /api/tickets         # åˆ›å»ºå·¥å•
GET    /api/tickets/:id     # è·å–å·¥å•è¯¦æƒ…
PUT    /api/tickets/:id     # æ›´æ–°å·¥å•
DELETE /api/tickets/:id     # åˆ é™¤å·¥å•
```

### è®¤è¯æ–¹å¼

API ä½¿ç”¨ Bearer Token è®¤è¯ï¼š

```bash
curl -H "Authorization: Bearer your-token" \
     http://localhost:3000/api/tickets
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

### æäº¤ä»£ç 

1. Fork é¡¹ç›®åˆ°æ‚¨çš„ GitHub è´¦æˆ·
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼š`git checkout -b feature/amazing-feature`
3. æäº¤æ›´æ”¹ï¼š`git commit -m 'Add amazing feature'`
4. æ¨é€åˆ†æ”¯ï¼š`git push origin feature/amazing-feature`
5. åˆ›å»º Pull Request

### æäº¤ä¿¡æ¯è§„èŒƒ

ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) æ ‡å‡†ï¼š

```
feat: æ·»åŠ æ–°åŠŸèƒ½
fix: ä¿®å¤ bug
docs: æ›´æ–°æ–‡æ¡£
style: æ ¼å¼åŒ–ä»£ç 
refactor: é‡æ„ä»£ç 
test: æ·»åŠ æµ‹è¯•
chore: æ›´æ–°ä¾èµ–
```

### ä»£ç å®¡æŸ¥

æ‰€æœ‰ä»£ç æ›´æ”¹éƒ½éœ€è¦é€šè¿‡ Pull Request å®¡æŸ¥ï¼š

- ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
- éµå¾ªé¡¹ç›®ä»£ç è§„èŒƒ
- æ·»åŠ å¿…è¦çš„æ–‡æ¡£å’Œæ³¨é‡Š
- æ›´æ–°ç›¸å…³æµ‹è¯•ç”¨ä¾‹

## ğŸ†˜ æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–æœ‰ç–‘é—®ï¼š

1. æ£€æŸ¥ [Issues](../../issues) ä¸­æ˜¯å¦æœ‰ç±»ä¼¼é—®é¢˜
2. åˆ›å»ºæ–°çš„ Issue æè¿°æ‚¨çš„é—®é¢˜
3. è”ç³»é¡¹ç›®ç»´æŠ¤è€…

---

**ç¥æ‚¨ç¼–ç æ„‰å¿«ï¼ğŸ‰**
